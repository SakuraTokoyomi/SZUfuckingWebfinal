<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>舞萌DX - Q&A</title>
    <link rel="stylesheet" href="../css/nav.css">
    <link rel="stylesheet" href="../css/QA.css">
    <script src="../js/global.js"></script>
</head>

<body>
    <nav class="homenav">
        <div class="navtitle"><img src="../image/maimai2023.png">
            <div class="search">
                <div class="container">
                    <i class="fa-brands fa-windows item"></i>
                    <div class="search-box">
                        <input type="text" class="search-btn" id="search" placeholder="搜索">
                    </div>
                    <i class="fa-solid fa-magnifying-glass item" onclick="fuck()"></i>
                </div>
            </div>
        </div>
        <a href="home.html">HOME</a>
        <a href="about.html">ABOUT</a>
        <a href="QA.html">Q&A</a>
        <a href="album.html">SONGS</a>
        <a href="login.html">LOGIN</a>
        <div class="navanim QA"></div>
        <div class="none" onclick="jumpToUserInfo()"><img src="../image/login.png" class="login" id="navAvater"></div>
    </nav>
    <div class="search-container">
        <input type="text" placeholder="搜索问题..." id="qa-search-box">
        <button type="submit" id="search-button" onclick="fuck()">搜索</button>
        <button type="button" id="add-button">+</button>
    </div>
    <main>
        <section class="question">
            <h2>问题标题</h2>
            <p>问题描述...</p>
            <div class="question-info">
                <span>回复数: 10</span>
                <span>浏览量: 200</span>
                <span>最后发表: 2023-12-30</span>
            </div>
        </section>
        <!-- 其他问题 -->
        <section class="question">
            <h2>问题标题</h2>
            <p>问题描述...</p>
            <div class="question-info">
                <span>回复数: 10</span>
                <span>浏览量: 200</span>
                <span>最后发表: 2023-12-30</span>
            </div>
        </section>
        <section class="question">
            <h2>问题标题</h2>
            <p>问题描述...</p>
            <div class="question-info">
                <span>回复数: 10</span>
                <span>浏览量: 200</span>
                <span>最后发表: 2023-12-30</span>
            </div>
        </section>
        <section class="question">
            <h2>问题标题</h2>
            <p>问题描述...</p>
            <div class="question-info">
                <span>回复数: 10</span>
                <span>浏览量: 200</span>
                <span>最后发表: 2023-12-30</span>
            </div>
        </section>
        <section class="question">
            <h2>问题标题</h2>
            <p>问题描述...</p>
            <div class="question-info">
                <span>回复数: 10</span>
                <span>浏览量: 200</span>
                <span>最后发表: 2023-12-30</span>
            </div>
        </section>
        <section class="question">
            <h2>问题标题</h2>
            <p>问题描述...</p>
            <div class="question-info">
                <span>回复数: 10</span>
                <span>浏览量: 200</span>
                <span>最后发表: 2023-12-30</span>
            </div>
        </section>
        <!-- 其他问题 -->
        <section class="question">
            <h2>问题标题</h2>
            <p>问题描述...</p>
            <div class="question-info">
                <span>回复数: 10</span>
                <span>浏览量: 200</span>
                <span>最后发表: 2023-12-30</span>
            </div>
        </section>
        <section class="question">
            <h2>问题标题</h2>
            <p>问题描述...</p>
            <div class="question-info">
                <span>回复数: 10</span>
                <span>浏览量: 200</span>
                <span>最后发表: 2023-12-30</span>
            </div>
        </section>
        <section class="question">
            <h2>问题标题</h2>
            <p>问题描述...</p>
            <div class="question-info">
                <span>回复数: 10</span>
                <span>浏览量: 200</span>
                <span>最后发表: 2023-12-30</span>
            </div>
        </section>
        <section class="question">
            <h2>问题标题</h2>
            <p>问题描述...</p>
            <div class="question-info">
                <span>回复数: 10</span>
                <span>浏览量: 200</span>
                <span>最后发表: 2023-12-30</span>
            </div>
        </section>

    </main>

    <!-- <footer class="foot">
        <span class="about">@2023-2024 | BY:Tokoyomi t3uk1 3zures</span><br>
        <span class="about">网页版权归修罗所有</span><br>
        <span class="about">i am the bone of my sword</span>
    </footer> -->
    <script src="https://kit.fontawesome.com/f23451c27c.js" crossorigin="anonymous"></script>
    <script>
        function fuck() {
            alert("fuck you")
        }
        document.getElementById('qa-search-box').addEventListener('keypress', function (event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // 阻止表单默认提交行为
                var searchTerm = this.value; // 获取输入框的值
                alert(searchTerm)// 执行搜索操作，例如发送请求或更新页面
                console.log("搜索词: " + searchTerm); // 示例操作
            }
        });

        document.addEventListener('DOMContentLoaded', function () {
    // 替换这里的 URL 为您的数据源地址
    var dataUrl = 'http://3zureus.vm.szu.moe:8080/webapi/QA/get-qas?From=0';

    // 使用 fetch API 获取数据
    fetch(dataUrl)
    .then(response => {
        if (!response.ok) {
            throw new Error('网络响应错误');
        }
        return response.json();
    })
    .then(responseData => {
        if (responseData.Success) {
            var questionsContainer = document.querySelector('main'); 
            console.log(responseData);
            responseData.Data.List.forEach(function (question) {
                var date = new Date(question.CreatedAt * 1000); // 将秒转换为毫秒
                var formattedDate = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();

                var questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = '<h2>' + question.Title + '</h2>'
                                       + '<p>' + question.Content + '</p>';

                var likeParagraph = document.createElement('span');
                likeParagraph.className = 'question-info';
                likeParagraph.textContent = '浏览量: 0'; // 这里可以替换为动态数据

                var subscribeParagraph = document.createElement('span');
                subscribeParagraph.className = 'question-info';
                subscribeParagraph.textContent = '回复数: 0'; // 这里可以替换为动态数据

                var dateParagraph = document.createElement('span');
                dateParagraph.className = 'question-info';
                dateParagraph.textContent = '最后发表: ' + formattedDate;

                questionDiv.onclick = function () {
                    window.location.href = question.DetailsPage;
                };

                questionDiv.appendChild(likeParagraph);
                questionDiv.appendChild(subscribeParagraph);
                questionDiv.appendChild(dateParagraph);
                questionsContainer.appendChild(questionDiv);
            });
        }
    })
    .catch(error => {
        console.error('获取数据失败:', error);
    });
});

    </script>
</body>

</html>